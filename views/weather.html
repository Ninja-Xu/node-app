<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>随身天气</title>
  <link rel="stylesheet" href="/css/base.css">
  <link rel="stylesheet" href="/css/styles.css">
</head>
<body class="weather">
  <div class="weather-left">
    <div class="weather-info">
      <div class="weather-search">
        <div class="weather-location">
          <p><img src="/images/location.png" alt="" class="location"><span></span></p>
          <p class="weather-date"></p>
        </div>
        <img src="./images/search.png" alt="" class="search">
      </div>
      <div class="weather-temp">
        <span class="temp-number"></span>
        <div class="temp-text">
          <span class="temp-circle"></span>
          <span class="temp-tq"></span>
        </div>
      </div>
      <ul class="weather-detail">
        <li class="weather-aqi"></li>
        <li class="weather-alarm"><!-- <img src="/images/wind-yellow.png" alt=""> --></li>
        <li><img src="/images/wind-direction.png" alt=""><span class="weather-wind"></span></li>
        <li><img src="/images/humidity.png" alt=""><span class="weather-humi"></span></li>
        <li><img src="/images/rainfall.png" alt=""><span class="weather-rainfall"></span></li>
        <li><img src="/images/pressure.png" alt=""><span class="weather-pressure"></span></li>
      </ul>
    </div>
    <div class="weather-rain">
      <h3></h3>
      <div id="rain" style="width: 100%; height: 200px;position:relative;"></div>
      <span class="rain-label">(分钟)</span>
    </div>
    <div class="weather-predict">
      <ul class="weather-predict-list weather-day">
        
      </ul>
      <div id="predict" style="width: 100%; height: 200px;"></div>
      <ul class="weather-predict-list weather-night">
        
      </ul>
    </div>
    <ul class="weather-life">
      <li class="weather-life-item">
        <img src="/images/icon-comfort.png" alt="">
        <div>
          <p>舒适度</p>
          <h4></h4>
        </div>
      </li>
      <li class="weather-life-item">
        <img src="/images/icon-wash.png" alt="">
        <div>
          <p>洗晒指数</p>
          <h4></h4>
        </div>
      </li>
      <li class="weather-life-item">
        <img src="/images/icon-clothes.png" alt="">
        <div>
          <p>穿衣指数</p>
          <h4></h4>
        </div>
      </li>
      <li class="weather-life-item">
        <img src="/images/icon-ultraviolet.png" alt="">
        <div>
          <p>紫外线</p>
          <h4></h4>
        </div>
      </li>
      <li class="weather-life-item">
        <img src="/images/icon-transport.png" alt="">
        <div>
          <p>交通指数</p>
          <h4></h4>
        </div>
      </li>
      <li class="weather-life-item">
        <img src="/images/icon-tour.png" alt="">
        <div>
          <p>旅游指数</p>
          <h4></h4>
        </div>
      </li>
      <li class="weather-life-item">
        <img src="/images/icon-sports.png" alt="">
        <div>
          <p>运动指数</p>
          <h4></h4>
        </div>
      </li>
      <li class="weather-life-item">
        <img src="/images/icon-influenza.png" alt="">
        <div>
          <p>感冒指数</p>
          <h4></h4>
        </div>
      </li>
      <li class="weather-life-item">
        <img src="/images/icon-fire.png" alt="">
        <div>
          <p>钓鱼指数</p>
          <h4></h4>
        </div>
      </li>
    </ul>
    <ul class="weather-news">
      <li><a href="" class="weather-news-item">
        <div>
          <h3>男孩一口气吃20多颗荔枝晕倒！荔枝美味但不能多吃</h3>
          <p>广州日报  2017-06-19 13:48</p>
        </div>
        <img src="./images/news-pic.jpg" alt="">
      </a></li>
      <li><a href="" class="weather-news-item">
        <div>
          <h3>男孩一口气吃20多颗荔枝晕倒！荔枝美味但不能多吃</h3>
          <p>广州日报  2017-06-19 13:48</p>
        </div>
        <img src="./images/news-pic.jpg" alt="">
      </a></li>
    </ul>
    <ul class="weather-link">
      <li class="weather-link-item">
        <a href="http://www.welife100.com/Wap/Sxsczl/index" class="weather-link-content">
          <img src="/images/silkroad.png" alt="">
          <span>丝路天气</span>
        </a>
      </li>
      <li class="weather-link-item">
        <a href="tel:400-6000-121" class="weather-link-content">
          <img src="/images/tel.png" alt="">
          <span>400-6000-121</span>
        </a>
      </li>
    </ul>
  </div>
  <div class="search-panel">
    <input type="search" placeholder="搜索城市名">
    <ul class="search-list search-result"></ul>
    <ul class="search-list">
      <li><a href="Index?areaid=101010100">北京</a></li><li><a href="Index?areaid=101020100">上海</a></li><li><a href="Index?areaid=101280601">深圳</a></li><li><a href="Index?areaid=101280101">广州</a></li><li><a href="Index?areaid=101320101">香港</a></li><li><a href="Index?areaid=101340101">台北</a></li><li><a href="Index?areaid=101330101">澳门</a></li><li><a href="Index?areaid=101030100">天津</a></li><li><a href="Index?areaid=101190101">南京</a></li><li><a href="Index?areaid=101200101">武汉</a></li><li><a href="Index?areaid=101210101">杭州</a></li><li><a href="Index?areaid=101040100">重庆</a></li><li><a href="Index?areaid=101190401">苏州</a></li><li><a href="Index?areaid=101070201">大连</a></li><li><a href="Index?areaid=101281601">东莞</a></li><li><a href="Index?areaid=101070101">沈阳</a></li><li><a href="Index?areaid=101270101">成都</a></li><li><a href="Index?areaid=101120201">青岛</a></li><li><a href="Index?areaid=101230201">厦门</a></li><li><a href="Index?areaid=101280800">佛山</a></li><li><a href="Index?areaid=101120101">济南</a></li><li><a href="Index?areaid=101050101">哈尔滨</a></li><li><a href="Index?areaid=101110101">西安</a></li><li><a href="Index?areaid=101290101">昆明</a></li>
    </ul>
    <div class="search-copy">
      <img src="./images/icon-map.png" alt="">
      <span>陕西天气</span>
    </div>
  </div>
  <script src="https://cdn.bootcss.com/jquery/2.2.3/jquery.min.js"></script>
  <!-- <script src="/js/dist/echarts.js"></script> -->
  <script src="https://cdn.bootcss.com/echarts/3.6.2/echarts.min.js"></script>
<script type="text/javascript" src="http://webapi.amap.com/maps?v=1.3&key=13356a0ccd8ad7d2bc0a731311acdef2"></script> 
<script src="http://api.map.baidu.com/api?v=2.0&ak=pXGDKqjuaEXKQQm3ZnMi0BRfoYZZBh03" type="text/javascript"></script>
<script>
  $(function() {
    $('.search').on('click', function () {
      $('.search-panel').toggleClass('search-show');
      $('.weather-left').toggleClass('search-show');
    });
    $('input[type="search"]').on('keyup keydown change', function () {
      $.ajax({
        url: 'http://shanxi.welife100.com/Index/getSearch?k=' + $(this).val(),
        success: function (data) {
          $('.search-result').html(data);
        }
      });
    });
    var area = window.localStorage.getItem('area');
    var areaid;
    if (location.search && location.search.indexOf('areaid') > -1) {
      areaid = location.search.split('=')[1];
    } 
    // else {
    //   areaid = "101110901";
    // }
    var $location = $('.weather-location span');
    var $date = $('.weather-date');
    var $detail = $('.weather-detail');
    var $temp = $('.temp-number');
    var $tq = $('.temp-tq');
    var air = {
      '良': '/images/air-good.png',
      '优': '/images/air-excellent.png',
      '轻度': '/images/air-slight.png',
      '轻度污染': '/images/air-slight.png',
      '中度': '/images/air-polluted.png',
      '重度': '/images/air-polluted.png',
      '严重': '/images/air-polluted.png'
    };
    var CODE_WEATHER = {
      '00': '晴',
      '01': '多云',
      '02': '阴',
      '03': '阵雨',
      '04': '雷阵雨',
      '05': '雷阵雨伴有冰雹',
      '06': '雨夹雪',
      '07': '小雨',
      '08': '中雨',
      '09': '大雨',
      '10': '暴雨',
      '11': '大暴雨',
      '12': '特大暴雨',
      '13': '阵雪',
      '14': '小雪',
      '15': '中雪',
      '16': '大雪',
      '17': '暴雪',
      '18': '雾',
      '19': '冻雨',
      '20': '沙尘暴',
      '21': '小到中雨',
      '22': '中到大雨',
      '23': '大到暴雨',
      '24': '暴雨到大暴雨',
      '25': '大暴雨到特大暴雨',
      '26': '小到中雪',
      '27': '中到大雪',
      '28': '大到暴雪',
      '29': '浮尘',
      '30': '扬沙',
      '31': '强沙尘暴',
      '32': '浓雾',
      '33': '雪',
      '49': '强浓雾',
      '53': '霾',
      '54': '中度霾',
      '55': '重度霾',
      '56': '严重霾',
      '57': '大雾',
      '58': '特强浓雾',
      '99': '无'
    };
    var CODE_FL = {
      '0': '微风',
      '1': '3-4级',
      '2': '4-5级',
      '3': '5-6级',
      '4': '6-7级',
      '5': '7-8级',
      '6': '7-8级',
      '7': '9-10级',
      '8': '10-11级',
      '9': '11-12级'
    };
    var CODE_FX = {
      '0': '无持续风向',
      '1': '东北风',
      '2': '东风',
      '3': '东南风',
      '4': '南风',
      '5': '西南风',
      '6': '西风',
      '7': '西北风',
      '8': '北风',
      '9': '旋转风'
    };
    var $rain = $('.weather-rain h3');
    var $day = $('.weather-day'), $night = $('.weather-night');
    var $aqi = $('.weather-aqi'), $alarm = $('.weather-alarm'), $wind = $('.weather-wind'), $humi = $('.weather-humi'), $rainfall = $('.weather-rainfall'), $pressure = $('.weather-pressure');
    // var mapObj = new AMap.Map('iCenter');
    // mapObj.plugin('AMap.Geolocation', function () {
    //   geolocation = new AMap.Geolocation({
    //     enableHighAccuracy: true,//是否使用高精度定位，默认:true
    //     timeout: 10000,          //超过10秒后停止定位，默认：无穷大
    //     maximumAge: 0,           //定位结果缓存0毫秒，默认：0
    //     convert: true,           //自动偏移坐标，偏移后的坐标为高德坐标，默认：true
    //     showButton: true,        //显示定位按钮，默认：true
    //     buttonPosition: 'LB',    //定位按钮停靠位置，默认：'LB'，左下角
    //     buttonOffset: new AMap.Pixel(10, 20),//定位按钮与设置的停靠位置的偏移量，默认：Pixel(10, 20)
    //     showMarker: true,        //定位成功后在定位到的位置显示点标记，默认：true
    //     showCircle: true,        //定位成功后用圆圈表示定位精度范围，默认：true
    //     panToLocation: true,     //定位成功后将定位到的位置作为地图中心点，默认：true
    //     zoomToAccuracy:true      //定位成功后调整地图视野范围使定位位置及精度范围视野内可见，默认：false
    //   });
    //   mapObj.addControl(geolocation);
    //   AMap.event.addListener(geolocation, 'complete', geoComplete); //返回定位信息
    //   AMap.event.addListener(geolocation, 'error', function (err) {
    //     console.log(err);
    //   }); //返回定位出错信息

    //   if(areaid){
    //     getcityweather(areaid);
    //   }else{
    //     geolocation.getCurrentPosition();
    //   }
    // });
    if (areaid) {
      getcityweather(areaid);
    } else {
      var cityName = '';
      var geolocation = new BMap.Geolocation();
      geolocation.getCurrentPosition(function(r) {
        if (this.getStatus() == BMAP_STATUS_SUCCESS) {
          var lng = r.point.lng;
          var lat = r.point.lat;
          var map = new BMap.Map("allmap");
          var point = new BMap.Point(lng, lat);
          var gc = new BMap.Geocoder();
          gc.getLocation(point, function(rs) {
            var addComp = rs.addressComponents;
            cityName = addComp.province + addComp.city + addComp.district + addComp.street + addComp.streetNumber;
            geoComplete($.extend(r, {address: cityName}));
          });

        } else {
          alert('failed' + this.getStatus());
        }
      }, {
        enableHighAccuracy: true
      });
    }
    function geoComplete (data) {
      $.ajax({
        type: "GET",
        url: "http://shanxi.welife100.com/Index/getIndexdata",
        data: {lon:data.point.lng,lat:data.point.lat},
        dataType: "json",
        success: function(res){
          renderWeather(res);
        }
      });
    }
    function getcityweather (areaid) {
    	$.ajax({
        type: "GET",
        url: "http://shanxi.welife100.com/Index/getIndexdata",
        data: {areaid:areaid},
        dataType: "json",
        success: function (rs) {
          renderWeather (rs)
        }
      });  
    }
    function renderWeather (rs) {
      var f = rs.data && rs.data.f;
      var l = rs.sk.l;
      var shzs = rs.shzs;
      $location.text(rs.address);
      $date.text(Number(f.f0.slice(4, 6)) + '月' + Number(f.f0.slice(6, 8)) + '日 农历' + dateToStr(f.f0) + ' ' + l.week);
      $temp.text(l.l1);
      $tq.text(CODE_WEATHER[l.l5]);
      var bodyClass = '';
      switch(l.l5) {
        case '00':
        case '01':
        case '02':
          bodyClass = 'weather-sunny';
          break;
        case '04':
        case '05':
          bodyClass = 'weather-thundershower';
          break;
        case '03':
        case '06':
        case '07':
        case '08':
        case '09':
        case '10':
        case '11':
        case '12':
        case '19':
        case '21':
        case '22':
        case '23':
        case '24':
        case '25':
          bodyClass = 'weather-rain';
          break;
        case '13':
        case '14':
        case '15':
        case '16':
        case '17':
        case '26':
        case '27':
        case '28':
          bodyClass = 'weather-snow';
          break;
        case '29':
        case '30':
        case '31':
          bodyClass = 'weather-sand';
          break;
        default:
          bodyClass = 'weather-haze';

      }
      $('.weather').addClass(bodyClass);
      $aqi.html('<img src="' + air[rs.aqi.level] + '" />' + rs.aqi.level + ' ' + rs.aqi.aqi);
      if (rs.alarm) {
        $alarm.text(rs.alarm[0].name + rs.alarm[0].color + '预警');
      } else {
        $alarm.text('');
      }
      $wind.text(CODE_FX[l.l4] + CODE_FL[l.l3]);
      $humi.text('相对湿度 ' + l.l2 + '%');
      $rainfall.text('降水量 ' + l.l6 + 'mm');
      $pressure.text('大气压力 ' + l.l10 + 'pa');
      $('.weather-life-item').each(function (index ,item) {
        switch (index) {
          case 0: 
            $(item).find('h4').text(shzs[9].des);
            break;
          case 1: 
            $(item).find('h4').text(shzs[1].des);
            break;
          case 2: 
            $(item).find('h4').text(shzs[7].des);
            break;
          case 3: 
            $(item).find('h4').text(shzs[6].des);
            break;
          case 4: 
            $(item).find('h4').text(shzs[2].des);
            break;
          case 5: 
            $(item).find('h4').text(shzs[3].des);
            break;
          case 6: 
            $(item).find('h4').text(shzs[4].des);
            break;
          case 7: 
            $(item).find('h4').text(shzs[5].des);
            break;
          case 8: 
            $(item).find('h4').text(shzs[8].des);
            break;
        }
      });
      // 气温曲线
      gettempEchars($("#predict").get(0),f.f1);

      //降水曲线
      var str = rs.fzj;
      str = str.substring(1,str.length-1).replace(/\\\\/g,"&&").replace(/\\/g,"").replace(/&&/g,"\\\\");
      var aRain = JSON.parse(str).result.minutely.precipitation_2h;
      $rain.text(eval("'" + JSON.parse(str).result.minutely.description + "'"));
      getrainEchars($("#rain").get(0),aRain);

      drawDay(f.f1);
      function drawDay (data) {
        var aqi = [];
        rs.weekaqi.forEach(function (item, index) {
          aqi.push(item.level.slice(0,1));
        });
        var day = '', night = '';
        data.forEach(function (item, index) {
          if (index < 7) {
            var fa = item.fa || l.l5;
            var tq = item.day_tq || l.weather;
            day += '<li class="weather-predict-item"><h4>' +
              item.week + '</h4><time>' +
              item.month + '-' + item.day + '</time><img src="/images/wearther/'+ fa +'.png" alt=""><p>' +
              tq + '</p></li>';
            night += '<li class="weather-predict-item">' +
              '<img src="/images/wearther/'+ item.night_img +'.png" alt=""><p>' +
              item.night_tq + '</p><span class="weather-aqi">' + aqi[index] + '</span></li>';
          }
        });
        $day.html(day);
        $night.html(night);
      }
      function getrainEchars(obj, data){
        var aData = [];
        for (var i = 0; i < data.length; i++) {
          aData.push(i + 1);
        }
       //  require.config({
        //   paths: {
        //       echarts: '/js/dist'
        //   }
        // });
        // require(['echarts', 'echarts/chart/line'], function (ec) {
          // var myChart = ec.init(obj, 'macarons');
          var myChart = echarts.init(obj);
          var option = {
            tooltip: {},
            textStyle: {
              color: '#fff'
            },
            xAxis: {
              type: 'category',
              splitLine: {
                show: true,
                lineStyle: {
                  opacity: 0.4
                }
              },
              axisTick: {
                show: false
              },
              axisLine: {
                show: false
              },
              data: aData
            },
            yAxis: {
              type: 'value',
              scale: true,
              splitNumber: 3,
              splitLine: {
                show: false
              },
              axisTick: {
                show: false
              },
              axisLine: {
                lineStyle: {
                  color: 'transparent'
                }
              },
              axisLabel: {
                interval: 2,
                margin: 14,
                formatter: function (value, index) {
                  var date = new Date(value);
                  var texts = [];
                  if (index === 0) {
                    texts.push('小雨')
                  }
                  if (index === 1) {
                    texts.push('中雨')
                  }
                  if (index === 2) {
                    texts.push('大雨')
                  }
                  return texts;
                }
              }
            },
            grid: {
              show: true,
              right: "5%",
              left: "13%",
              backgroundColor: 'rgba(0, 0, 0, 0)'
            },
            series: [{
              type: 'line',
              smooth: true,
              areaStyle: {
                normal: {
                  color: '#fff',
                  opacity: 0.4
                }
              },
              lineStyle: {
                normal: {
                  opacity: 0
                }
              },
              showSymbol: false,
              data: data
            }]
          };
          myChart.setOption(option);
        // });
      }
      function gettempEchars(obj, data){
        var day =[], night = []; 
        data.forEach(function (item) {
          var wendu = item.day_wendu || f.max;
          day.push(wendu);
          night.push(item.night_wendu);
        });
        day = day.slice(0, 7);
        night = night.slice(0, 7);
       //  require.config({
        //   paths: {
        //       echarts: '/js/dist'
        //   }
        // });
        // require(['echarts', 'echarts/chart/line'], function (ec) {
          // var myChart = ec.init(obj, 'macarons');
          var myChart = echarts.init(obj);
          var option2 = {
              xAxis: {
                type: 'category',
                show: false,
                data: ['1', '2', '3', '4', '5', '6', '7']
              },
              yAxis: {
                type: 'value',
                show: false
              },
              grid: {
                left: 0,
                right: 0,
                top: "10%",
                bottom: 0
              },
              series: [{
                name: '最低气温',
                type: 'line',
                stack: '气温',
                label: {
                  normal: {
                    show: true,
                    position: 'bottom',
                    textStyle: {
                      color: '#73fffd'
                    }
                  }
                },
                lineStyle: {
                  normal: {
                    color: '#c4bfbf'
                  }
                },
                symbolSize: 8,
                data: night
              }, {
                name: '最高气温',
                type: 'line',
                stack: '气温',
                label: {
                  normal: {
                    show: true,
                    position: 'top',
                    textStyle: {
                      color: '#ff8cbb'
                    }
                  }
                },
                lineStyle: {
                  normal: {
                    color: '#c4bfbf'
                  }
                },
                symbolSize: 8,
                areaStyle: {
                  normal: {
                    color: 'rgba(0, 0, 0, 0.1)'
                  }
                },
                data: day
              }]
            };
          myChart.setOption(option2);
        // });
      }
      function dateToStr (time) {
        var CalendarData=new Array(100);
        var madd=new Array(12);
        var tgString="甲乙丙丁戊己庚辛壬癸";
        var dzString="子丑寅卯辰巳午未申酉戌亥";
        var numString="一二三四五六七八九十";
        var monString="正二三四五六七八九十冬腊";
        var weekString="日一二三四五六";
        var sx="鼠牛虎兔龙蛇马羊猴鸡狗猪";
        var cYear,cMonth,cDay,TheDate;
        CalendarData = new Array(0xA4B,0x5164B,0x6A5,0x6D4,0x415B5,0x2B6,0x957,0x2092F,0x497,0x60C96,0xD4A,0xEA5,0x50DA9,0x5AD,0x2B6,0x3126E, 0x92E,0x7192D,0xC95,0xD4A,0x61B4A,0xB55,0x56A,0x4155B, 0x25D,0x92D,0x2192B,0xA95,0x71695,0x6CA,0xB55,0x50AB5,0x4DA,0xA5B,0x30A57,0x52B,0x8152A,0xE95,0x6AA,0x615AA,0xAB5,0x4B6,0x414AE,0xA57,0x526,0x31D26,0xD95,0x70B55,0x56A,0x96D,0x5095D,0x4AD,0xA4D,0x41A4D,0xD25,0x81AA5,0xB54,0xB6A,0x612DA,0x95B,0x49B,0x41497,0xA4B,0xA164B, 0x6A5,0x6D4,0x615B4,0xAB6,0x957,0x5092F,0x497,0x64B, 0x30D4A,0xEA5,0x80D65,0x5AC,0xAB6,0x5126D,0x92E,0xC96,0x41A95,0xD4A,0xDA5,0x20B55,0x56A,0x7155B,0x25D,0x92D,0x5192B,0xA95,0xB4A,0x416AA,0xAD5,0x90AB5,0x4BA,0xA5B, 0x60A57,0x52B,0xA93,0x40E95);
        madd[0]=0;
        madd[1]=31;
        madd[2]=59;
        madd[3]=90;
        madd[4]=120;
        madd[5]=151;
        madd[6]=181;
        madd[7]=212;
        madd[8]=243;
        madd[9]=273;
        madd[10]=304;
        madd[11]=334;
         
        function GetBit(m,n){
        return (m>>n)&1;
        }
        function e2c(){
        TheDate= (arguments.length!=3) ? new Date() : new Date(arguments[0],arguments[1],arguments[2]);
        var total,m,n,k;
        var isEnd=false;
        var tmp=TheDate.getYear();
        if(tmp<1900){
         tmp+=1900;
        }
        total=(tmp-1921)*365+Math.floor((tmp-1921)/4)+madd[TheDate.getMonth()]+TheDate.getDate()-38;
         
        if(TheDate.getYear()%4==0&&TheDate.getMonth()>1) {
         total++;
        }
        for(m=0;;m++){
         k=(CalendarData[m]<0xfff)?11:12;
         for(n=k;n>=0;n--){
        if(total<=29+GetBit(CalendarData[m],n)){
         isEnd=true; break;
         }
         total=total-29-GetBit(CalendarData[m],n);
         }
         if(isEnd) break;
        }
        cYear=1921 + m;
        cMonth=k-n+1;
        cDay=total;
        if(k==12){
         if(cMonth==Math.floor(CalendarData[m]/0x10000)+1){
         cMonth=1-cMonth;
         }
        if(cMonth>Math.floor(CalendarData[m]/0x10000)+1){
         cMonth--;
         }
        }
        }
         
        function GetcDateString(){
        var tmp="";
        if(cMonth<1){
        tmp+="(闰)";
        tmp+=monString.charAt(-cMonth-1);
        }else{
         tmp+=monString.charAt(cMonth-1);
        }
        tmp+="月";
        tmp+=(cDay<11)?"初":((cDay<20)?"十":((cDay<30)?"廿":"三十"));
        if (cDay%10!=0||cDay==10){
         tmp+=numString.charAt((cDay-1)%10);
        }
        return tmp;
        }
         
        function GetLunarDay(solarYear,solarMonth,solarDay){
        //solarYear = solarYear<1900?(1900+solarYear):solarYear;
        if(solarYear<1921 || solarYear>2020){
        return "";
        }else{
         solarMonth = (parseInt(solarMonth)>0) ? (solarMonth-1) : 11;
         e2c(solarYear,solarMonth,solarDay);
         return GetcDateString();
        }
        }
        
        var yy=time.substr(0, 4);
        var mm=time.substr(4, 2);
        var dd=time.substr(6, 2);
        if (yy<100) yy="19"+yy;
        return GetLunarDay(yy,mm,dd);
      }
    }
  });
</script>
</body>
</html>